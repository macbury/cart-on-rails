<script type="text/javascript" charset="utf-8">
	$(document).ready(function () {
		$('#theme_content').wrap('<span class="code_editor"></span>')
		var editor = CodeMirror.fromTextArea('theme_content', {
			parserfile: ["parsexml.js", "parsecss.js", "tokenizejavascript.js", "parsejavascript.js", "parsehtmlmixed.js"],
			stylesheet: ["/codemirror/css/xmlcolors.css", "/codemirror/css/jscolors.css", "/codemirror/css/csscolors.css"],
			path: "/codemirror/js/",
			continuousScanning: 500,
			lineNumbers: true,
			autoMatchParens: true
		});
	});
</script>
<h2><%= @page_template.new_record? ? 'Nowy szablon' : 'Edycja szablonu' %></h2>
<div class="box editor">
	<% form_for [:admin, @page_template] do |f| %>
		<% unless @page_template.default %>
		<p>
			<span>
				<%= f.label :name, 'Nazwa' %>
			</span>
			<%= f.text_field :name %>
		</p>
		<% end %>
		<p>
			<span>
				<%= f.label :page_type, 'Typ' %>
			</span>
			<%= f.select :page_type, Theme.types %>
		</p>
		<% content_tag :p, :style => @page_template.page_type == 1 ? 'display:block;' : 'display:none', :id => 'layout_box' do %>
			<span>
				<%= f.label :layout_id, 'Layout' %>
			</span>
			<%= f.select :layout_id, @shop.themes.all(:conditions => { :page_type => 0 }).map { |template| [template.name, template.id] }, { :include_blank => 'Brak layoutu' } %>
		<% end %>
		<p>
			<span>
				<%= f.label :content, 'Kod' %>
			</span>
			<%= f.text_area :content %>
		</p>
		
		<div class="clear"></div>
		
		<p class="buttons">
			<span class="button">
				<%= f.submit "Zapisz" %>
			</span>
			<span class="button">
				<%= f.submit "Zapisz i dalej edytuj" %>
			</span>
			 <%= link_to 'anuluj', admin_themes_path %>
			<% if !(@page_template.new_record? || @page_template.default) %>
				 albo 
				<%= link_to 'usuń', [:admin, @page_template], :method => :delete, :confirm => 'Czy na pewno chcesz usunąć ten szablon?' %>
			<% end %>
			<span class="clear"></span>
		</p>
	<% end %>
</div>
